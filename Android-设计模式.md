# ã€ŠAndroid æºç è®¾è®¡æ¨¡å¼-è§£æä¸å®æˆ˜ã€‹è¯»ä¹¦ç¬”è®°
> è¯»è€…ï¼š[DevMcryYu](https://github.com/DevMcryYu)  
> æœ€åæ›´æ–°äºï¼š2019-04-02

äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯¦è§[è®¾è®¡æ¨¡å¼ä¸­æ–‡ Wiki](https://zh.wikipedia.org/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_(%E8%AE%A1%E7%AE%97%E6%9C%BA))

## ç¬¬ä¸€ç«  é¢å‘å¯¹è±¡çš„å…­å¤§åŸåˆ™

### 1. å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Principleï¼‰

> å°±ä¸€ä¸ªç±»è€Œè¨€ï¼Œåº”è¯¥ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› 

é€šä¿—åœ°è®²å°±æ˜¯ï¼Œä¸€ä¸ªç±»ä¸­åº”è¯¥æ˜¯ä¸€ç»„ç›¸å…³æ€§å¾ˆé«˜çš„å‡½æ•°ã€æ•°æ®çš„å°è£…ã€‚

### 2. å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰

> è½¯ä»¶ä¸­çš„å¯¹è±¡ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ç­‰ï¼‰å¯¹äºæ‹“å±•æ˜¯å¼€æ”¾çš„ï¼Œå¯¹äºä¿®æ”¹æ˜¯å°é—­çš„

éµå¾ªå¼€é—­åŸåˆ™çš„æœ€å¥½æ‰‹æ®µå°±æ˜¯æŠ½è±¡ã€‚å¦‚æœæ¯æ¬¡æ·»åŠ æ–°çš„åŠŸèƒ½æ—¶éƒ½è¦ä¿®æ”¹åŸæœ‰çš„æ–¹æ³•ï¼Œè¿™ä¼šä½¿åŸæœ‰æ–¹æ³•é€»è¾‘è¶Šæ¥è¶Šå¤æ‚ã€‚é€šè¿‡å°†åŠŸèƒ½æŠ½è±¡æå–æˆæ¥å£ï¼Œç»§æ‰¿å¹¶å®ç°ï¼Œå°±å¯ä»¥è¾¾åˆ°æ‹“å±•çš„ç›®çš„è€Œåˆä¸ä¿®æ”¹åŸæœ‰æ–¹æ³•ã€‚

### 3. é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰

> æ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡

é‡Œæ°æ›¿æ¢ä¾èµ–äºç»§æ‰¿ã€å¤šæ€ä¸¤å¤§ç‰¹æ€§ã€‚åªè¦æ˜¯çˆ¶ç±»èƒ½å‡ºç°çš„åœ°æ–¹å­ç±»ä¹Ÿå¯ä»¥å‡ºç°å¹¶ä¸”ä¸ä¼šäº§ç”Ÿé”™è¯¯ã€‚åä¹‹åˆ™ä¸ç„¶ã€‚

### 4. ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰

> æ¨¡å—é—´çš„ä¾èµ–é€šè¿‡æŠ½è±¡å‘ç”Ÿï¼Œå®ç°ç±»ä¹‹é—´ä¸å‘ç”Ÿç›´æ¥çš„ä¾èµ–å…³ç³»ï¼Œè€Œæ˜¯é€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»äº§ç”Ÿçš„

é¢å‘æ¥å£ç¼–ç¨‹ã€é¢å‘æŠ½è±¡ç¼–ç¨‹ã€‚  
æ‹“å±•ï¼š[ä¾èµ–æ³¨å…¥](https://zh.wikipedia.org/zh/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5)

### 5. æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterfaceSegregation Principaleï¼‰

> ç±»é—´çš„ä¾èµ–å…³ç³»åº”å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Š

æ›´ç›´è§‚çš„è¯´æ³•å°±æ˜¯è®©å®¢æˆ·ç«¯ä¾èµ–çš„æ¥å£å°½å¯èƒ½å¾—å°ï¼Œä»è€Œæ›´å®¹æ˜“é‡æ„ã€æ›´æ”¹ã€‚

### 6. è¿ªç±³ç‰¹/æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLaw of Demeter/Least Knowledge Principleï¼‰

> ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„äº†è§£

ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»è¶Šå¯†åˆ‡åˆ™è€¦åˆåº¦è¶Šå¤§ï¼Œå› æ­¤è°ƒç”¨è€…ä¸ä¾èµ–è€…æ²¡å¿…è¦äº†è§£å…¶å†…éƒ¨çš„å…·ä½“å®ç°ã€‚éšè—ç»†èŠ‚æ‰èƒ½æœ‰æ•ˆé™ä½è€¦åˆæ€§ã€‚

## ç¬¬äºŒç«  å•ä¾‹æ¨¡å¼
> ğŸ‘ï¼šå‡å°‘å†…å­˜å¼€æ”¯ã€æ€§èƒ½å¼€é”€ï¼›é¿å…å¯¹èµ„æºçš„å¤šé‡å ç”¨ã€‚
> ğŸ‘ï¼šä¸€èˆ¬æ²¡æœ‰æ¥å£ï¼Œæ‹“å±•å›°éš¾ï¼›å•ä¾‹å¦‚æœæŒæœ‰ Context å®¹æ˜“å¼•å‘å†…å­˜æ³„æ¼ï¼Œæ­¤æ—¶éœ€è¦æ³¨æ„ä¼ é€’ç»™å…¶çš„ Context æœ€å¥½æ˜¯ Application Contextã€‚  

**å®šä¹‰**ï¼šç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¸”è‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ã€‚
**åœºæ™¯**ï¼šä¸éœ€è¦åˆ›å»ºå¤šä¸ªå¯¹è±¡ã€åˆ›å»ºå¯¹è±¡æ¶ˆè€—çš„èµ„æºè¿‡å¤šæ—¶ã€‚

### å•ä¾‹çš„å®ç°æ–¹å¼
- **æ‡’æ±‰æ–¹å¼**
```java
public class Singleton {
  private static Singleton instance;

  private Singleton() {
    // do something
  }

  public static synchronized getInstance() {
    if (instance == null)
      instance = new Singleton();
    return instance;
  }
}
```
æ‡’æ±‰æ–¹å¼ä¸‹ä»…åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ `getInstance()` æ–¹æ³•æ—¶è¿›è¡Œåˆå§‹åŒ–ã€‚

- **é¥¿æ±‰æ–¹å¼**
```java
public class Singleton {
  private static final Singleton instance = new Singleton();

  private Singleton() {
    // do something
  }

  public static Singleton getInstance() {
    return instance;
  }
}
```
é¥¿æ±‰æ¨¡å¼ä¸‹åˆ™åœ¨å£°æ˜é™æ€å¯¹è±¡æ—¶å°±å·²ç»åˆå§‹åŒ–ã€‚

- **Double Check Lockï¼ˆDCLï¼‰æ–¹å¼**
```java
public class Singleton {
  private volatile static Singleton instance = null;

  private Singleton() {
    // do something
  }

  public static Singleton getInstance() {
    if (instance == null){
      synchronized (Singleton.class)
        if (instance == null)
          instance = new Singleton();
    }
    return instance;
  }
}
```
DCL æ–¹å¼å®ç°çš„å•ä¾‹å¯¹ instance è¿›è¡Œä¸¤æ¬¡åˆ¤ç©ºï¼Œç¬¬ä¸€æ¬¡æ˜¯ä¸ºäº†é¿å…ä¸å¿…è¦çš„åŒæ­¥ï¼Œç¬¬äºŒæ¬¡çš„åˆ¤ç©ºæ‰æ˜¯ä¸ºäº†åœ¨ null çš„æƒ…å†µä¸‹åˆ›å»ºå®ä¾‹ã€‚
- **é™æ€å†…éƒ¨ç±»æ–¹å¼**
```java
public class Singleton {
  private Singleton() {
    // do something
  }

  public static Singleton getInstance() {
    return SingletonHolder.intance;
  }

  private static class SingletonHolder {
    private static final Singleton instance = new Singleton();
  }
}
```
ç¬¬ä¸€æ¬¡è°ƒç”¨ `getInstance()` æ—¶å¼€å§‹åˆå§‹åŒ–ï¼Œä»è€Œä½¿è™šæ‹ŸæœºåŠ è½½ SingletonHolder ç±»ï¼Œè¿™ç§æ–¹å¼ä¸ä»…ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿèƒ½å¤Ÿä¿è¯å•ä¾‹å¯¹è±¡çš„å”¯ä¸€æ€§ï¼Œå»¶è¿Ÿäº†å•ä¾‹çš„å®ä¾‹åŒ–ã€‚æ‰€ä»¥æ˜¯æ¨èä½¿ç”¨çš„å•ä¾‹æ¨¡å¼ã€‚
- **æšä¸¾æ–¹å¼**
```java
public enum SingltonEnum {
  INSTACNE;
  public void doSomething() {
    // do somethinga
  }
}
```
æšä¸¾å•ä¾‹æœ€å¤§ä¼˜ç‚¹æ˜¯å†™æ³•ç®€å•ï¼Œè€Œä¸”é»˜è®¤æšä¸¾å®ä¾‹çš„åˆ›å»ºæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä¸Šè¿°å…¶å®ƒçš„å•ä¾‹æ¨¡å¼åœ¨ååºåˆ—åŒ–æ—¶ä¼šå‡ºç°é‡æ–°åˆ›å»ºå®ä¾‹çš„æƒ…å†µã€‚å¦‚æœè¦é¿å…è¿™æ ·çš„æƒ…å†µå‘ç”Ÿï¼Œé‚£ä¹ˆå¿…é¡»åŠ ä¸Šå¦‚ä¸‹æ–¹æ³•ï¼š
```java
  private Object readResolve() throws ObjectStreamException {
    return instance;
  }
```
è€Œæšä¸¾å•ä¾‹åˆ™ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚
- **ä½¿ç”¨å®¹å™¨å®ç°**
é€šè¿‡å°†å¤šç§å•ä¾‹ç±»å‹æ³¨å…¥åˆ°ä¸€ä¸ªç»Ÿä¸€çš„ç®¡ç†ç±»ä¸­ï¼Œåœ¨ä½¿ç”¨æ—¶æ ¹æ® key è·å–å¯¹è±¡å¯¹åº”ç±»å‹çš„å¯¹è±¡ã€‚ä»è€Œç®¡ç†å¤šç§ç±»å‹çš„å•ä¾‹ï¼Œè¿˜å¯ä»¥ç»Ÿä¸€æ¥å£è¿›è¡Œæ“ä½œã€‚ä»£ç çœç•¥ã€‚

### Android æºç ä¸­çš„è¿ç”¨
ä½¿ç”¨ `LayoutInflater.from(context)` æ–¹æ³•è·å– LayoutInflater æœåŠ¡  

## ç¬¬ä¸‰ç«  Builder æ¨¡å¼
å¾…æ•´ç†
## ç¬¬å››ç«  åŸå‹æ¨¡å¼
å¾…æ•´ç†
## ç¬¬äº”ç«  å·¥å‚æ–¹æ³•æ¨¡å¼
å¾…æ•´ç†
## ç¬¬åäºŒç«  è§‚å¯Ÿè€…æ¨¡å¼
å¾…æ•´ç†
